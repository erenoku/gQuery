<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="./favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta http-equiv="content-security-policy" content="">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/__layout.svelte-8a32e475.css">
	<link rel="modulepreload" href="/_app/immutable/start-3b060844.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/index-824779f0.js">
	<link rel="modulepreload" href="/_app/immutable/pages/__layout.svelte-3d85073d.js">
	<link rel="modulepreload" href="/_app/immutable/pages/index.svelte-ef5dd1c7.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/prism-5a0c904a.js">
	</head>
	<body>
		<div>


<main class="svelte-1k2207m"><aside class="svelte-1k2207m"><h1 class="svelte-1k2207m">gQuery</h1>
		<a href="https://github.com/leveluptuts/gQuery" target="_blank"><svg viewBox="0 0 24 24" class="svelte-bpn430 svelte-1k2207m" style="width: 40px;"><path fill="white" stroke="white" d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"></path></svg></a>
		<nav class="svelte-1k2207m"><h5>Docs</h5>
			<a href="/#how-to-use" class="svelte-1k2207m">How To Use</a>
			<a href="/#examples" class="svelte-1k2207m">Examples</a>
			<a href="/#dev-tools" class="svelte-1k2207m">Dev Tools</a>
			<a href="/#codegen-in-depth" class="svelte-1k2207m">Codegen In Depth</a>
			<a href="/contributing" class="svelte-1k2207m">Contributing</a>

			<h5>Links</h5>
			<a href="https://github.com/leveluptuts/gQuery/tree/main/example" target="_blank" class="svelte-1k2207m">Example Repo</a>
			<a href="https://leveluptutorials.com/" target="_blank" class="svelte-1k2207m">Level Up Tutorials</a></nav></aside>
	<section class="svelte-1k2207m"><div class="markdown-render"><!-- HTML_TAG_START --><h4 id="not-like-jquery-a-different-kind-of-graphql-client-for-svelte-kit">Not like jQuery. A different kind of GraphQL Client for Svelte Kit</h4>
<h2 id="how-to-use">How to use</h2>
<h3 id="0-install">0. Install</h3>
<pre><code class="language-shell">npm install --save @leveluptuts/g-query graphql-tag
</code></pre>
<h3 id="1-initialize-g">1. Initialize G</h3>
<pre><code class="language-javascript"><span class="token comment">// src/lib/config/g.ts</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GFetch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'https://yourapiurl.com/graphql'</span> <span class="token comment">//whatever your api url is here</span>
    <span class="token comment">// More config options coming, for now this is just path to your graphql api</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>ðŸ‘€: This expects that you have a Graphql API already running. This can be any valid graphql api url.</p>
</blockquote>
<h3 id="2-add-graphql-codegen-plugin-to-svelte-kit">2. Add GraphQL Codegen Plugin to Svelte Kit</h3>
<pre><code class="language-javascript"><span class="token comment">// svelte.config.js</span>

<span class="token keyword">import</span> gQueryCodegen <span class="token keyword">from</span> <span class="token string">'@leveluptuts/g-query/codegen'</span>

<span class="token operator">...</span>
<span class="token literal-property property">vite</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">gQueryCodegen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// Required</span>
            <span class="token comment">// schema: 'http://localhost:3001/graphql' // this can also be a url to a graphql api</span>
            <span class="token literal-property property">schema</span><span class="token operator">:</span> <span class="token string">'./src/lib/graphql/schema.graphql'</span><span class="token punctuation">,</span> <span class="token comment">// path to schema, schema is required</span>
            <span class="token literal-property property">out</span><span class="token operator">:</span> <span class="token string">'./src/lib/graphql'</span><span class="token punctuation">,</span> <span class="token comment">// Where you want the general schema types to output</span>
            <span class="token literal-property property">gPath</span><span class="token operator">:</span> <span class="token string">'$lib/config/g'</span> <span class="token comment">// Path to g, created in step 1.</span>
            <span class="token comment">// Optional</span>
            <span class="token literal-property property">debug</span><span class="token operator">:</span> <span class="token boolean">false</span>  <span class="token comment">// boolean, this adds logging for gq files deleted and on codegen</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
</code></pre>
<h3 id="3-add-graphql-files">3. Add .graphql files</h3>
<pre><code class="language-graphql">// UserQueries.graphql

query currentUser {
    user {
        _id
    }
}
</code></pre>
<h3 id="4-use-it">4. Use it</h3>
<p>Run your dev process. Because gQuery uses a plugin to control the codegen, it will remove all .gq files then regenerate anytime there is a change to .graphql files. The codegen will find the file and spit out a file next to it. Named</p>
<pre><code>FileName.gq.ts
</code></pre>
<p>Using the above code, it would output</p>
<pre><code>UserQueries.gq.ts
</code></pre>
<p>This also gives us a &quot;get&quot; function for queries based on the query name. ie &quot;getUser&quot; for the above.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// The generated function that fetches and caches</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> getCurrentUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./UserQueries.gq'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> fetch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Runs the cache/fetch function populating $currentUser before use.</span>
        <span class="token keyword">await</span> <span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">variables</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            fetch <span class="token comment">// Don't forget to pass fetch for ssr</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// Cache becomes populated with data available for SSR</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./UserQueries.gq'</span><span class="token punctuation">;</span>

    <span class="token comment">// $: console.log($user.user) //data available for ssr</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<hr>
<h2 id="examples">Examples</h2>
<p>All of these examples assume a successful codegen run.</p>
<h3 id="query">Query</h3>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// The generated function that fetches and caches</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> getCurrentUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./UserQueries.gq'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> fetch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Runs the cache/fetch function populating $gCache before use.</span>
        <span class="token keyword">await</span> <span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">variables</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            fetch
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// Cache becomes populated with data available for SSR</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> currenUser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./UserQueries.gq'</span><span class="token punctuation">;</span>

    <span class="token comment">// data available for ssr</span>
    <span class="token comment">// correctly ts typed and all</span>
    <span class="token comment">// $: console.log($currentUser.user) //data available for ssr</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<h3 id="mutation">Mutation</h3>
<pre><code class="language-graphql">// UserQueries.graphql

mutation makeUserAdmin($_id: ID!) {
  makeUserAdmin(_id: $_id) {
      _id
      userName
  }
}
</code></pre>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// The generated function that hits mutation</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> makeUserAdmin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./UserQueries.gq'</span><span class="token punctuation">;</span>

    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">makeAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Runs the cache/fetch function populating $gCache before use.</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> makeUserAdmin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">makeUserAdmin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">variables</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">'someCoolUsersId'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            fetch
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Want to update the cache?</span>
        <span class="token comment">// All gQuery objects are writable stores so you can just update like this</span>
        $currentUser<span class="token punctuation">.</span>user <span class="token operator">=</span> makeUserAdmin<span class="token punctuation">;</span>
        <span class="token comment">// OR</span>
        <span class="token comment">// You can just re-call the original query</span>
        <span class="token comment">// await getCurrentUser()</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{makeAdmin}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Make Cool User Admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
</code></pre>
<h3 id="subscription">Subscription</h3>
<p>Not available yet, but should be fairly trivial with the current API, I just don&#39;t use them much, so I haven&#39;t invested the time. This code is well documented, so feel free to submit a PR.</p>
<hr>
<h2 id="dev-tools">Dev Tools</h2>
<p>We have some really neat dev tools available for gQuery via</p>
<pre><code class="language-shell">@leveluptuts/svelte-toy
</code></pre>
<p>These dev tools live in your project and can easily be added by making a new component. You can name it whatever you would like.</p>
<pre><code class="language-html">// DevTools.svelte

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> getStores <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@leveluptuts/g-query'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> Toy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@leveluptuts/svelte-toy'</span><span class="token punctuation">;</span> <span class="token comment">// npm install --save @leveluptuts/svelte-toy</span>

    <span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">'./**/*.gq.ts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// finds all gq.ts files in the current directory and subdirectories</span>
    <span class="token keyword">let</span> stores <span class="token operator">=</span> <span class="token function">getStores</span><span class="token punctuation">(</span>modules<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Toy</span> <span class="token attr-name">register</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{stores}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p>Then you can use them by adding to your project easily. We hide ours in production and you probably should as well.</p>
<pre><code class="language-html"><span class="token comment">&lt;!-- ðŸ‘€ isDevelopment isn't something that exists without you making it. --></span>
{#if isDevelopment}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DevTools</span> <span class="token punctuation">/></span></span>
{/if}
</code></pre>
<hr>
<h2 id="codegen-in-depth">Codegen In Depth</h2>
<p>This section isn&#39;t required to read, but if you are the curious type, this will give you some insight into how codegen plays a role in g-query and what our output looks like.</p>
<p>We use the wonderful <a href="https://www.graphql-code-generator.com/">https://www.graphql-code-generator.com/</a> as the basis for all of our codegen.</p>
<h3 id="what-is-actually-generated">What is actually generated?</h3>
<p>Here is an example. In this example we have a file AdminTags.graphql that contains 1 query and 1 mutations</p>
<p>AdminTags.graphql</p>
<pre><code class="language-graphql">query adminTags {
    tags {
        _id
        name
    }
}

mutation deleteTag($_id: ID!) {
    deleteTag(_id: $_id)
}
</code></pre>
<p>From this, gQuery will generate a file named</p>
<pre><code class="language-shell">AdminTags.gq.ts
</code></pre>
<p>That will contain the following</p>
<pre><code class="language-javascript"><span class="token keyword">import</span> type <span class="token operator">*</span> <span class="token keyword">as</span> Types <span class="token keyword">from</span> <span class="token string">'../../graphql/types.gq'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> writable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'svelte/store'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> g <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'$lib/config/g'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> GFetchReturnWithErrors<span class="token punctuation">,</span> GGetParameters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@leveluptuts/g-query'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> gql <span class="token keyword">from</span> <span class="token string">'graphql-tag'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> type AdminTagsQueryVariables <span class="token operator">=</span> Types<span class="token punctuation">.</span>Exact<span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> never <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">export</span> type AdminTagsQuery <span class="token operator">=</span> <span class="token punctuation">{</span>
    __typename<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'Query'</span><span class="token punctuation">;</span>
    tags<span class="token operator">?</span><span class="token operator">:</span>
        <span class="token operator">|</span> Array<span class="token operator">&lt;</span><span class="token punctuation">{</span> __typename<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'Tag'</span><span class="token punctuation">;</span> _id<span class="token operator">:</span> string<span class="token punctuation">;</span> name<span class="token operator">:</span> string <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">></span>
        <span class="token operator">|</span> <span class="token keyword">null</span>
        <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> type DeleteTagMutationVariables <span class="token operator">=</span> Types<span class="token punctuation">.</span>Exact<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token literal-property property">_id</span><span class="token operator">:</span> Types<span class="token punctuation">.</span>Scalars<span class="token punctuation">[</span><span class="token string">'ID'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">export</span> type DeleteTagMutation <span class="token operator">=</span> <span class="token punctuation">{</span>
    __typename<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'Mutation'</span><span class="token punctuation">;</span>
    deleteTag<span class="token operator">?</span><span class="token operator">:</span> boolean <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> AdminTagsDoc <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    query adminTags {
        tags {
            _id
            name
        }
    }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> DeleteTagDoc <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    mutation deleteTag($_id: ID!) {
        deleteTag(_id: $_id)
    }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> adminTags <span class="token operator">=</span> writable<span class="token operator">&lt;</span>GFetchReturnWithErrors<span class="token operator">&lt;</span>AdminTagsQuery<span class="token operator">>></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Cached</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAdminTags</span><span class="token punctuation">(</span>
    <span class="token parameter"><span class="token punctuation">{</span> fetch<span class="token punctuation">,</span> variables <span class="token punctuation">}</span><span class="token operator">:</span> GGetParameters<span class="token operator">&lt;</span>AdminTagsQueryVariables<span class="token operator">></span><span class="token punctuation">,</span>
    options<span class="token operator">?</span><span class="token operator">:</span> CacheFunctionOptions</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> g<span class="token punctuation">.</span>fetch<span class="token operator">&lt;</span>AdminTagsQuery<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">queries</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">query</span><span class="token operator">:</span> AdminTagsDoc<span class="token punctuation">,</span> variables <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        fetch
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> adminTags<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>data<span class="token punctuation">,</span>
        <span class="token literal-property property">errors</span><span class="token operator">:</span> data<span class="token operator">?.</span>errors<span class="token punctuation">,</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'LOADED'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> deleteTag <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    variables
<span class="token punctuation">}</span><span class="token operator">:</span> SubscribeWrapperArgs<span class="token operator">&lt;</span>DeleteTagMutationVariables<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>
    GFetchReturnWithErrors<span class="token operator">&lt;</span>DeleteTagMutation<span class="token operator">></span>
<span class="token operator">></span> <span class="token operator">=></span>
    g<span class="token punctuation">.</span>fetch<span class="token operator">&lt;</span>DeleteTagMutation<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">queries</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">query</span><span class="token operator">:</span> DeleteTagDoc<span class="token punctuation">,</span> variables <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        fetch
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>You can see from this, we have all the types we would need as well as our two usable functions and our Svelte writable.</p>
<hr>
<h2 id="faq--wtf">FAQ / WTF</h2>
<h3 id="q-how-tf-do-i-update-the-cache">Q? How tf do I update the cache?</h3>
<p>It&#39;s a Svelte Writable Store. So after a mutation you can quickly and easily manually update the cache.</p>
<pre><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> someMutation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./UserQueries.gq'</span><span class="token punctuation">;</span>

$user<span class="token punctuation">.</span>user <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// clears the cache object</span>

$user<span class="token punctuation">.</span>user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">someMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span> variables <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// if this returns the correct data</span>
</code></pre>
<h3 id="q-cant-you-update-the-cache-magically-for-me-after-a-mutation">Q? Can&#39;t you update the cache magically for me after a mutation?</h3>
<p>Maybe? If you want to be in charge of writing that bit, the door is open ðŸ˜¼. My idea for the api would look something like this.
This isn&#39;t real code, but maybe a way to do it. Who knows, I&#39;m open to anything.</p>
<pre><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> someMutation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./UserQueries.gq'</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> <span class="token function">someMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span> variables<span class="token punctuation">,</span> <span class="token literal-property property">store</span><span class="token operator">:</span> user <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="q-how-is-this-different-than-x-y-z-library">Q? How is this different than X, Y, Z library?</h3>
<p>We&#39;re dogfooding / using this lib to build LevelUpTutorials.com. It&#39;s not intended to be perfect for every usecase, but effortless for ones like Level Up. There are similar libraries that have taken inspiration from gQuery, but only on gQuery. Check out our API and if it looks nice to you, give it a try. We plan on keeping this thing lightweight and effortless. Often imitated, never duplicated. Stay fresh.</p>
<!-- HTML_TAG_END --></div></section>
</main>


		<script type="module" data-sveltekit-hydrate="1nyaj3n">
		import { start } from "/_app/immutable/start-3b060844.js";
		start({
			target: document.querySelector('[data-sveltekit-hydrate="1nyaj3n"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [0, 3],
				params: {},
				routeId: ""
			}
		});
	</script></div>
	</body>
</html>
